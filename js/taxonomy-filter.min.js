"use strict";class TaxonomyFilter{initEventHandlers(){const e=document.querySelector("#taxonomy-filter #submit");if(!e)throw new Error('Could not find button "#taxonomy-filter #submit"');const t=document.querySelector("#taxonomy-filter #reset");if(!t)throw new Error('Could not find button "#taxonomy-filter #reset"');e.addEventListener("click",e=>{e.preventDefault();let t=this.getCleanPathname();t=this.addTaxonomyFiltersToPathname(t),window.location.href=t}),t.addEventListener("click",e=>{e.preventDefault(),this.resetCheckboxes();const t=this.getCleanPathname();window.location.href=t})}resetCheckboxes(){const e=document.querySelectorAll("#taxonomy-filter input");for(const t of e)t.checked=!1}getCleanPathname(){let e=document.location.pathname;const t=document.querySelectorAll("#taxonomy-filter input");for(const o of t){const[t]=o.name.split(":"),n=new RegExp(`/${t}:[^/]+`);e=e.replace(n,"")}return e=e.replace(/\/page:\d+/,""),e.replace(/\/\//g,"/")||"/"}addTaxonomyFiltersToPathname(e){const t=document.getElementById("taxonomy-filter"),o=new FormData(t),n={};for(const e of o.keys()){let t,o;[t,o]=e.split(":"),n[t]||(n[t]=""),n[t]+=n[t]?","+o:o}let r="";for(const e of Object.entries(n))r+=`/${e[0]}:${e[1]}`;return(e+r).replace(/\/\//g,"/")}}(new TaxonomyFilter).initEventHandlers();